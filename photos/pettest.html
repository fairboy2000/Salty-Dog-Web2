<html>

<head>

    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">
    <title>Pet Photos</title>
    <!-- jQuery-->
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js" integrity="sha384-q8i/X+965DzO0rT7abK41JStQIAqVgRVzpbzo5smXKp4YfRvH+8abtTE1Pi6jizo"
        crossorigin="anonymous"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js" integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49"
        crossorigin="anonymous"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js" integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy"
        crossorigin="anonymous"></script>
    <!-- framework css -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.4.2/css/all.css" integrity="sha384-/rXc/GQVaYpyDdyxK+ecHPVYJSN9bmVFBvjA/9eOB+pb3F2w2N6fc5qB9Ew5yIns"
        crossorigin="anonymous">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO"
        crossorigin="anonymous">
    <!--<![endif]-->
    <link rel="icon" type="image/png" href="../images/social-logos/favicon.ico">
    <link type="text/css" rel="stylesheet" href="cssPhotos/styleBoot.css">



    
   
    <div class="container">
        <nav class="navbar navbar-expand-lg ">
            <div class="dropdown">
                <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                    aria-expanded="false">
                    <i class="fas fa-bars"></i> Menu
                </a>

                <div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
                    <li>
                        <a class="dropdown-item" href="../index.html">Home</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/stores.html" target="blank">Shop</a>
                    </li>

                    <li class="dropdown-submenu">
                        <a class="test btn  dropdown-toggle" tabindex="-1" href="#" href="#">Dine
                            <span class="caret"></span>
                        </a>

                        <ul class="dropdown-menu">
                            <li>
                                <a tabindex="-1" href="../Dine/dine.html">Salty Dog Dining</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/cafe.html">Salty Dog Cafe</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/bluffdog.html">Salty Dog Cafe Bluffton</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/landsend.html">Land's End</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/wreck.html">Wreck</a>
                            </li>
                            <li>
                                    <a tabindex="-1" href="../Dine/wreck.html">Kiwi's Island Grill</a>
                                </li>
                            <li>
                                <a tabindex="-1" href="../Dine/pizza.html">Pizza</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/icecream.html">IceCream</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/cater.html">Catering</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../Dine/dailyspec.html">Daily Specials</a>
                            </li>
                        </ul>
                    </li>


                    <li>
                        <a class="dropdown-item" href="../cruise/cruise.html" target="blank">Cruise</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="http://www.sbinn.com/" target="blank">Stay</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/events.html">Events</a>
                    </li>

                    <li>
                        <a class="dropdown-item" href="http://tv.saltydog.com/" target="blank">Live</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/radio.html">Radio</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/kids.html">Kids</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/feedback.html">Feedback Us</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/findus.html">Find Us</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Pages/contact.html">Contact Us</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../lucky/win.html">Lucky Receipts</a>
                    </li>

                    <li class="dropdown-submenu">
                        <a class="test btn  dropdown-toggle" tabindex="-1" href="#" href="#">Photos
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a tabindex="-1" href="photos.html">Pet Photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="petphotossearch.html">Search Pet Photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photosevents.html">Special Events photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photossanta.html">Photos with Santa</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photosjake.html">Photos with Jake</a>
                            </li>
                        </ul>

                    </li>



                    <li class="dropdown-submenu">
                        <a class="test btn  dropdown-toggle" tabindex="-1" href="#" href="#">Webcams
                            <span class="caret"></span>
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a tabindex="-1" href="../WebCams/webcams.html">See all our Webcams</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/bluewatercam.html">Bluewater Cam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/boatcam.html">BoatCam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/boatcamaft.html">BoatCam Aft</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/boatcambow.html">BoatCam Bow</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/courtyardcam.html">Courtyard Cam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/overheadcam.html">Overhead Cam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/South Beach Cam.html">South Beach Cam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/tangercam.html">Tanger Outlet Cam</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="../WebCams/tshirtcam.html">T-Shirt Cam</a>
                            </li>
                        </ul>
                    </li>


                    <li>
                        <a class="dropdown-item" href="../Pages/weather.php">Weather</a>
                    </li>
                    <li>
                        <a class="dropdown-item" href="../Legend/legend.html">The Legend</a>
                    </li>
                </div>

            </div>

            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a href="../tides/tides.html" target="_blank">

                        <img src="../images/social-logos/TIDESBUTTON.png">
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../Pages/social.html" target="_blank">
                        <img src="../images/social-logos/Facebook_Rounded.png">
                    </a>
                </li>
                <li class="nav-item">
                    <a href="../Pages/social.html" target="_blank">
                        <img src="../images/social-logos/Instagram_RoundedEdges.png">
                    </a>
                </li>
            </ul>

        </nav>
    </div>


    <div class="container">
        <img src="../images/HeaderBanners/PICS PETS.png" style="width:100%; height:auto">

    </div>

    <div class="container">
        <div class="row" style="margin-top: 5px">

            <div class="col">
                <nav class="navbar navbar-expand-lg ">
                    <div class="dropdown">
                        <a class="btn btn-secondary dropdown-toggle" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true"
                            aria-expanded="false">
                            <i class="fas fa-bars"></i> Photos
                        </a>
                        <ul class="dropdown-menu">
                            <li>
                                <a tabindex="-1" href="photos.html">Pet Photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="petphotossearch.html">Search Pet Photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photosevents.html">Special Events photos</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photossanta.html">Photos with Santa</a>
                            </li>
                            <li>
                                <a tabindex="-1" href="photosjake.html">Photos with Jake</a>
                            </li>

                        </ul>
                    </div>
                </nav>

            </div>
        </div>
    </div>
    <div class="container">
            <div class="container">
                    <h2>
            
                        Search Pets by Name!
                    </h2>
                    </div>
                    <div class="row">
                        <div class="input-field col s5">
                            <!-- // Search Box -->
                            <input id="userInput" type="text" class="validate">
                            <label for="userInput">Enter Pets Name</label>
                        </div>
                        <div class="input-field col s2">
                            <!-- // Search Button -->
                            <button type="button" class="btn btn-warning">
                                <a class="btn-warning" id="searchBtn">
                                    <p>Search</p>
                                </a>
                            </button>
                        </div>
                    </div>
            
                    <div class="image-container">
                        <!-- // Search results will be appended here -->
                    </div>
                    <!-- // More image btn -->
                    <a class="button btn-warning" id="moreImagesBtn">
                        LOAD MORE PHOTOS
                        <i class="fa fa-chevron-down" aria-hidden="true"></i>
                    </a>
                    </div>





            <script type="text/javascript">
                console.log("I'm here");
                $(
                    (function () {
                        "use strict";
                        // API Key
                        const flickrKey = "204df225455ff4bafd6d7bf01c742e3d";
                        // Search Text
                        let userInput = $("#userInput");
                        // Search Btn
                        let searchBtn = $("#searchBtn");
                        // More Images btn
                        let moreImagesBtn = $("#moreImagesBtn");
                        // Result Image area
                        let imageContainer = $(".image-container");
                        // Count of returned results
                        let perPageCount = 20;
                        // variable for current page requested so that when the user scrolls, it is increamented and json is requested
                        let currentPage = 1;
        
                        // SEARCH BTN EVENT LISTENER
                        searchBtn.on("click", function () {
                            // Clear exisitng images
                            imageContainer.html("");
                            validateInput();
                        }); // end of SEARCH BTN EVENT LISTENER
        
                        //USER SEARCH SUBMIT [ENTER BTN] EVENT LISTENER
                        userInput.on("keyup", function (e) {
                            if (e.keyCode == 13) {
                                // Clear exisitng images
                                imageContainer.html("");
                                validateInput();
                            }
                        }); // end of USER SEARCH SUBMIT [ENTER BTN] EVENT LISTENER
        
                        // MORE IMAGES BTN
                        moreImagesBtn.on("click", function () {
                            currentPage++;
                            console.log(currentPage);
                            validateInput();
        
                        }); // END OF MORE IMAGES BTN
        
                        // VALIDATE USER INPUT
                        function validateInput() {
                            console.log(userInput);
                            //check if query len is valid
                            if (userInput.val().length != 0) {
                                // Call the AJAX req passing in the user search
                                getImageData(userInput.val());
                            } else {
                                userInput.focus();
                            } // end of validation
                        } //end of VALIDATE USER INPUT
        
                        // GET JSON FROM FLICKR API
                        function getImageData(query) {
                            $.ajax({
                                type: "GET",
                                url: `https://api.flickr.com/services/rest/?method=flickr.photos.search&api_key=${flickrKey}&tags="salty+dog+cafe+dogs"&text=${query}&per_page=${perPageCount}&page=${currentPage}&format=json&nojsoncallback=1`,
                                success: function (data) {
                                    // Call the handle Data function and pass the response
                                    handleData(data);
                                    console.log(data);
                                    console.log(url)
                                    console.log("here 2")
                                },
                                error: function (e) {
                                    alert("Failed to load data from API");
                                    moreImagesBtn.html("Something Went Wrong");
                                    console.log(e);
                                }
                            });
                        } // END OF getImageData
        
                        // Build urls for the images
                        function handleData(data) {
                            //console.log(data);
                            data.photos.photo.forEach(function (currentPhoto, index, array) {
                                // Image URL > Will be built and made an link
                                let photoURL = `https://farm${currentPhoto.farm}.static.flickr.com/${currentPhoto.server}/${currentPhoto.id}_${currentPhoto.secret}_b.jpg`;
                                // alt text
                                let title = currentPhoto.title;
                                // plug the data to page
                                pushImages(photoURL, title);
                            });
                            //show the more btn
                            moreImagesBtn.slideDown();
                        } // END OF handleData
        
                        // Built HTML tempate and push the images to the webpage
                        function pushImages(url, title) {
                            // Build the HTML element
                            let htmlText =
                                '<div class="image">' +
                                '<img class="materialboxed" data-caption="' +
                                title +
                                '" src="' +
                                url +
                                '">' +
                                "</div>";
                            imageContainer.append(htmlText);
                            // Add the Materialize functionality to the images
                            $(".materialboxed").materialbox();
                        } // END OF pushImages
                    })() // end of self self executing anonymous function
                );
        
        
        
        
            </script>
</body>

</html>